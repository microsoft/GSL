trigger:
  - main

pr:
  autoCancel: true

stages:
# - stage: GCC
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       compiler: gcc
#       image: ubuntu-20.04
#       compilerVersions: [ 11, 10 ]
#       setupfile: 'setup_gcc.yml'

# - stage: Clang
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       compiler: clang
#       image: ubuntu-20.04
#       compilerVersions: [ 11, 10 ]
#       setupfile: 'setup_clang.yml'

# - stage: Apple_Clang
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       compiler: 'Apple-Clang'
#       image: macOS-11
#       compilerVersions: [ '12.5.1', '13.1' ]
#       setupfile: 'setup_apple.yml'

- template: ./pipelines/jobs.yml
  parameters:
    compiler: 'MSVC VS2019'
    compilerVersions: [ '16.11' ]
    CXXVersions: [ 14 ]
    buildTypes: [ Release ]
    image: windows-2019

# # MSVC
# - stage: MSVC
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate MSVC latest'
#       imageName: windows-latest
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate MSVC Previous'
#       imageName: vs2017-win2016
#       CXXVersions: [ 14, 17 ]
#
