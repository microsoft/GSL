trigger:
  - main

pr:
  autoCancel: true

stages:
- stage: GCC
  dependsOn: []
  jobs:
  - template: ./pipelines/jobs.yml
    parameters:
      compiler: gcc
      image: ubuntu-20.04
      compilerVersions: [ 11, 10 ]
      # compilerVersions: [ 8, 9 ]
      CXXVersions: [ 14 ]
      setupfile: 'setup_gcc.yml'

#
# # Clang
# - stage: Clang
#   dependsOn: []
#   variables:
#   - name: CC
#     value: clang
#   - name: CXX
#     value: clang++
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate Clang latest'
#       imageName: ubuntu-20.04
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate Clang Previous'
#       imageName: ubuntu-18.04
#       CXXVersions: [ 14, 17 ]
#
# # MSVC
# - stage: MSVC
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate MSVC latest'
#       imageName: windows-latest
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate MSVC Previous'
#       imageName: vs2017-win2016
#       CXXVersions: [ 14, 17 ]
#
# # Apple-Clang
# - stage: Apple_Clang
#   dependsOn: []
#   jobs:
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate Apple-Clang latest'
#       imageName: macos-10.15
#       CXXVersions: [ 14, 17 ]
#   - template: ./pipelines/jobs.yml
#     parameters:
#       jobName: 'Validate Apple-Clang Previous'
#       imageName: macos-10.14
#       CXXVersions: [ 14, 17 ]
